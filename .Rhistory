library(tidyverse)
library(ggplot2)
sqf_by_year <- read.csv(file="./Data/sqf_by_year.csv", header=TRUE)
ggplot(data=sqf_by_year, aes(x=year, y=count/1000)) + geom_bar(stat="identity") + ggtitle("NYPD Stop-and-Frisk (2003-2017)") + theme_grey(18) + theme(plot.title=element_text(hjust=0.5)) + scale_x_continuous("Year", labels=as.character(sqf_by_year$year), breaks=sqf_by_year$year) + ylab("Frequency (Thousands)")
arrests_by_race <- read.csv(file="./Data/arrests_by_race.csv", header=TRUE)
census_by_race <- read.csv(file="./Data/census_by_race.csv", header=TRUE)
complaints_by_susp_race <- read.csv(file="./Data/complaints_by_susp_race.csv", header=TRUE)
shootings_by_perp_race <- read.csv(file="./Data/shootings_by_perp_race.csv", header=TRUE)
sqf_by_race <- read.csv(file="./Data/sqf_by_race.csv", header=TRUE)
race_data <- do.call("rbind", list(arrests_by_race, complaints_by_susp_race, shootings_by_perp_race, sqf_by_race))
race_data$dataset <- factor(race_data$dataset, levels=c("Stop-and-Frisk", "Complaints", "Arrests", "Shootings"))
par(mfrow=c(1,2))
par(mar = c(11,4,3,1) + 0.1)
barplot(sqf_by_race$percentage, names.arg=sqf_by_race$race, main="Stop-and-Frisk by Suspect Race", ylim=c(0, .55), las=2)
barplot(census_by_race$percentage, names.arg=census_by_race$race, main="NYC 2010 Census by Race", ylim=c(0, .55), las=2)
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race")
race_bar_chart
complaints_data$VIC_RACE <- as.character(complaints_data$VIC_RACE)
complaints_data[complaints_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
complaints_data[complaints_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER",] <- "ASIAN/PAC.ISL"
complaints_by_vic_race <- aggregate(CMPLNT_NUM~VIC_RACE, complaints_data, length)
colnames(complaints_by_vic_race) <- c("race", "count")
complaints_by_vic_race
complaints_data$VIC_RACE <- as.character(complaints_data$VIC_RACE)
complaints_data[complaints_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
complaints_data[complaints_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER",] <- "ASIAN/PAC.ISL"
complaints_by_vic_race <- aggregate(CMPLNT_NUM~VIC_RACE, complaints_data, length)
colnames(complaints_by_vic_race) <- c("race", "count")
complaints_by_vic_race <- complaints_by_vic_race[order(-complaints_by_vic_race$count),]
complaints_by_vic_race
complaints_data$VIC_RACE <- as.character(complaints_data$VIC_RACE)
complaints_data[complaints_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
complaints_data[complaints_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER",] <- "ASIAN/PAC.ISL"
complaints_by_vic_race <- aggregate(CMPLNT_NUM~VIC_RACE, complaints_data, length)
colnames(complaints_by_vic_race) <- c("race", "count")
complaints_by_vic_race <- complaints_by_vic_race[order(-complaints_by_vic_race$count),]
complaints_by_vic_race <- complaints_by_vic_race[!(complaints_by_vic_race$race=="UNKNOWN"),]
complaints_by_susp_race <- complaints_by_susp_race[-1,]
complaints_by_vic_race
complaints_data$VIC_RACE <- as.character(complaints_data$VIC_RACE)
complaints_data[complaints_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
complaints_data[complaints_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER",] <- "ASIAN/PAC.ISL"
complaints_by_vic_race <- aggregate(CMPLNT_NUM~VIC_RACE, complaints_data, length)
colnames(complaints_by_vic_race) <- c("race", "count")
complaints_by_vic_race <- complaints_by_vic_race[order(-complaints_by_vic_race$count),]
complaints_by_vic_race <- complaints_by_vic_race[!(complaints_by_vic_race$race=="UNKNOWN"),]
complaints_by_vic_race
complaints_data$VIC_RACE <- as.character(complaints_data$VIC_RACE)
complaints_data[complaints_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
complaints_data[complaints_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER",] <- "ASIAN/PAC.ISL"
complaints_by_vic_race <- aggregate(CMPLNT_NUM~VIC_RACE, complaints_data, length)
colnames(complaints_by_vic_race) <- c("race", "count")
complaints_by_vic_race <- complaints_by_vic_race[order(-complaints_by_vic_race$count),]
complaints_by_vic_race <- complaints_by_vic_race[!(complaints_by_vic_race$race=="UNKNOWN"),]
complaints_by_vic_race <- head(complaints_by_vic_race,-2)
complaints_by_vic_race
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
shootings_data <- read.csv(file="./Raw_Data/shootings_data.csv", header=TRUE, na.strings="n/a")
shootings_data$PERP_RACE <- as.character(shootings_data$PERP_RACE)
shootings_data[shootings_data$PERP_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
shootings_data[shootings_data$PERP_RACE == "ASIAN / PACIFIC ISLANDER",] <- "ASIAN/PAC.ISL"
shootings_by_perp_race <- aggregate(INCIDENT_KEY~PERP_RACE, shootings_data, length)
colnames(shootings_by_perp_race) <- c("race", "count")
shootings_by_perp_race <- shootings_by_perp_race[order(-shootings_by_perp_race$count),]
shootings_by_perp_race <- shootings_by_perp_race[-1,]
shootings_by_perp_race <- shootings_by_perp_race[!(shootings_by_perp_race$race=="UNKNOWN"),]
shootings_by_perp_race$percentage <- shootings_by_perp_race$count / sum(shootings_by_perp_race$count)
shootings_by_perp_race$dataset <- "Shootings"
write.csv(shootings_by_perp_race, file="./Data/shootings_by_perp_race.csv", row.names=FALSE)
shootings_by_perp_race
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
shootings_data <- read.csv(file="./Raw_Data/shootings_data.csv", header=TRUE, na.strings="n/a")
shootings_data$PERP_RACE <- as.character(shootings_data$PERP_RACE)
shootings_data[shootings_data$PERP_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
shootings_data[shootings_data$PERP_RACE == "ASIAN / PACIFIC ISLANDER",] <- "ASIAN/PAC.ISL"
shootings_by_perp_race <- aggregate(INCIDENT_KEY~PERP_RACE, shootings_data, length)
colnames(shootings_by_perp_race) <- c("race", "count")
shootings_by_perp_race <- shootings_by_perp_race[order(-shootings_by_perp_race$count),]
shootings_by_perp_race <- shootings_by_perp_race[-1,]
shootings_by_perp_race <- shootings_by_perp_race[!(shootings_by_perp_race$race=="UNKNOWN"),]
shootings_by_perp_race$percentage <- shootings_by_perp_race$count / sum(shootings_by_perp_race$count)
shootings_by_perp_race$dataset <- "Shootings"
write.csv(shootings_by_perp_race, file="./Data/shootings_by_perp_race.csv", row.names=FALSE)
shootings_by_perp_race
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
shootings_data <- read.csv(file="./Raw_Data/shootings_data.csv", header=TRUE, na.strings="n/a")
shootings_data$PERP_RACE <- as.character(shootings_data$PERP_RACE)
shootings_data[shootings_data$PERP_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
shootings_data[shootings_data$PERP_RACE == "ASIAN / PACIFIC ISLANDER",] <- "ASIAN/PAC.ISL"
shootings_by_perp_race <- aggregate(INCIDENT_KEY~PERP_RACE, shootings_data, length)
colnames(shootings_by_perp_race) <- c("race", "count")
shootings_by_perp_race <- shootings_by_perp_race[order(-shootings_by_perp_race$count),]
shootings_by_perp_race <- shootings_by_perp_race[-1,]
shootings_by_perp_race <- shootings_by_perp_race[!(shootings_by_perp_race$race=="UNKNOWN"),]
shootings_by_perp_race$percentage <- shootings_by_perp_race$count / sum(shootings_by_perp_race$count)
shootings_by_perp_race$dataset <- "Shootings"
write.csv(shootings_by_perp_race, file="./Data/shootings_by_perp_race.csv", row.names=FALSE)
shootings_by_perp_race
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",]
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data[shootings_data$VIC_RACE == "WHITE",]
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",]
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
shootings_data <- read.csv(file="./Raw_Data/shootings_data.csv", header=TRUE)
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
shootings_data <- read.csv(file="./Raw_Data/shootings_data.csv", header=TRUE)
shootings_data$PERP_RACE <- as.character(shootings_data$PERP_RACE)
shootings_data[shootings_data$PERP_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
shootings_data[shootings_data$PERP_RACE == "ASIAN / PACIFIC ISLANDER",] <- "ASIAN/PAC.ISL"
shootings_by_perp_race <- aggregate(INCIDENT_KEY~PERP_RACE, shootings_data, length)
colnames(shootings_by_perp_race) <- c("race", "count")
shootings_by_perp_race <- shootings_by_perp_race[order(-shootings_by_perp_race$count),]
shootings_by_perp_race <- shootings_by_perp_race[-1,]
shootings_by_perp_race <- shootings_by_perp_race[!(shootings_by_perp_race$race=="UNKNOWN"),]
shootings_by_perp_race$percentage <- shootings_by_perp_race$count / sum(shootings_by_perp_race$count)
shootings_by_perp_race$dataset <- "Shootings"
write.csv(shootings_by_perp_race, file="./Data/shootings_by_perp_race.csv", row.names=FALSE)
shootings_by_perp_race
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",]
shootings_data[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE",] <- "AMER IND"
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
shootings_data <- read.csv(file="./Raw_Data/shootings_data.csv", header=TRUE, na.strings="n/a")
shootings_data$PERP_RACE <- as.character(shootings_data$PERP_RACE)
shootings_data[shootings_data$PERP_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
shootings_data <- read.csv(file="./Raw_Data/shootings_data.csv", header=TRUE, na.strings="n/a")
shootings_data$PERP_RACE <- as.character(shootings_data$PERP_RACE)
shootings_data$PERP_RACE[shootings_data$PERP_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
shootings_data$PERP_RACE[shootings_data$PERP_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
shootings_by_perp_race <- aggregate(INCIDENT_KEY~PERP_RACE, shootings_data, length)
colnames(shootings_by_perp_race) <- c("race", "count")
shootings_by_perp_race <- shootings_by_perp_race[order(-shootings_by_perp_race$count),]
shootings_by_perp_race <- shootings_by_perp_race[-1,]
shootings_by_perp_race <- shootings_by_perp_race[!(shootings_by_perp_race$race=="UNKNOWN"),]
shootings_by_perp_race$percentage <- shootings_by_perp_race$count / sum(shootings_by_perp_race$count)
shootings_by_perp_race$dataset <- "Shootings"
write.csv(shootings_by_perp_race, file="./Data/shootings_by_perp_race.csv", row.names=FALSE)
shootings_by_perp_race
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data$VIC_RACE[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
shootings_data$VIC_RACE[shootings_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
shootings_by_vic_race <- aggregate(INCIDENT_KEY~VIC_RACE, shootings_data, length)
colnames(shootings_by_vic_race) <- c("race", "count")
shootings_by_vic_race <- shootings_by_vic_race[order(-shootings_by_vic_race$count),]
shootings_by_vic_race
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
complaints_data <- read.csv(file="./Raw_Data/complaints_data.csv", header=TRUE, na.strings="n/a")
complaints_data$SUSP_RACE <- as.character(complaints_data$SUSP_RACE)
complaints_data$SUSP_RACE[complaints_data$SUSP_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
complaints_data$SUSP_RACE[complaints_data$SUSP_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
complaints_by_susp_race <- aggregate(CMPLNT_NUM~SUSP_RACE, complaints_data, length)
colnames(complaints_by_susp_race) <- c("race", "count")
complaints_by_susp_race <- complaints_by_susp_race[order(-complaints_by_susp_race$count),]
complaints_by_susp_race <- complaints_by_susp_race[-1,]
complaints_by_susp_race <- complaints_by_susp_race[!(complaints_by_susp_race$race=="UNKNOWN"),]
complaints_by_susp_race$percentage <- complaints_by_susp_race$count / sum(complaints_by_susp_race$count)
complaints_by_susp_race$dataset <- "Complaints"
write.csv(complaints_by_susp_race, file="./Data/complaints_by_susp_race.csv", row.names=FALSE)
complaints_by_susp_race
complaints_data$VIC_RACE <- as.character(complaints_data$VIC_RACE)
complaints_data$VIC_RACE[complaints_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
complaints_data$VIC_RACE[complaints_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
complaints_by_vic_race <- aggregate(CMPLNT_NUM~VIC_RACE, complaints_data, length)
colnames(complaints_by_vic_race) <- c("race", "count")
complaints_by_vic_race <- complaints_by_vic_race[order(-complaints_by_vic_race$count),]
complaints_by_vic_race <- complaints_by_vic_race[!(complaints_by_vic_race$race=="UNKNOWN"),]
complaints_by_vic_race <- head(complaints_by_vic_race,-2)
complaints_by_vic_race
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data$VIC_RACE[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
shootings_data$VIC_RACE[shootings_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
shootings_by_vic_race <- aggregate(INCIDENT_KEY~VIC_RACE, shootings_data, length)
colnames(shootings_by_vic_race) <- c("race", "count")
shootings_by_vic_race <- shootings_by_vic_race[order(-shootings_by_vic_race$count),]
shootings_by_vic_race <- shootings_by_vic_race[!(shootings_by_vic_race$race=="UNKNOWN"),]
shootings_by_vic_race
complaints_data$VIC_RACE <- as.character(complaints_data$VIC_RACE)
complaints_data$VIC_RACE[complaints_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
complaints_data$VIC_RACE[complaints_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
complaints_by_vic_race <- aggregate(CMPLNT_NUM~VIC_RACE, complaints_data, length)
colnames(complaints_by_vic_race) <- c("race", "count")
complaints_by_vic_race <- complaints_by_vic_race[order(-complaints_by_vic_race$count),]
complaints_by_vic_race <- complaints_by_vic_race[!(complaints_by_vic_race$race=="UNKNOWN"),]
complaints_by_vic_race <- head(complaints_by_vic_race,-2)
complaints_by_vic_race$percentage <- complaints_by_vic_race$count / sum(complaints_by_vic_race$count)
complaints_by_vic_race$dataset <- "Complaints"
complaints_by_vic_race
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data$VIC_RACE[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
shootings_data$VIC_RACE[shootings_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
shootings_by_vic_race <- aggregate(INCIDENT_KEY~VIC_RACE, shootings_data, length)
colnames(shootings_by_vic_race) <- c("race", "count")
shootings_by_vic_race <- shootings_by_vic_race[order(-shootings_by_vic_race$count),]
shootings_by_vic_race <- shootings_by_vic_race[!(shootings_by_vic_race$race=="UNKNOWN"),]
shootings_by_vic_race$percentage <- shootings_by_vic_race$count / sum(shootings_by_vic_race$count)
shootings_by_vic_race$dataset <- "Shootings"
shootings_by_vic_race
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
complaints_data <- read.csv(file="./Raw_Data/complaints_data.csv", header=TRUE, na.strings="n/a")
complaints_data$SUSP_RACE <- as.character(complaints_data$SUSP_RACE)
complaints_data$SUSP_RACE[complaints_data$SUSP_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
complaints_data$SUSP_RACE[complaints_data$SUSP_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
complaints_by_susp_race <- aggregate(CMPLNT_NUM~SUSP_RACE, complaints_data, length)
colnames(complaints_by_susp_race) <- c("race", "count")
complaints_by_susp_race <- complaints_by_susp_race[order(-complaints_by_susp_race$count),]
complaints_by_susp_race <- complaints_by_susp_race[-1,]
complaints_by_susp_race <- complaints_by_susp_race[!(complaints_by_susp_race$race=="UNKNOWN"),]
complaints_by_susp_race$percentage <- complaints_by_susp_race$count / sum(complaints_by_susp_race$count)
complaints_by_susp_race$dataset <- "Complaints"
write.csv(complaints_by_susp_race, file="./Data/complaints_by_susp_race.csv", row.names=FALSE)
complaints_by_susp_race
complaints_data$VIC_RACE <- as.character(complaints_data$VIC_RACE)
complaints_data$VIC_RACE[complaints_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
complaints_data$VIC_RACE[complaints_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
complaints_by_vic_race <- aggregate(CMPLNT_NUM~VIC_RACE, complaints_data, length)
colnames(complaints_by_vic_race) <- c("race", "count")
complaints_by_vic_race <- complaints_by_vic_race[order(-complaints_by_vic_race$count),]
complaints_by_vic_race <- complaints_by_vic_race[!(complaints_by_vic_race$race=="UNKNOWN"),]
complaints_by_vic_race <- head(complaints_by_vic_race,-2)
complaints_by_vic_race$percentage <- complaints_by_vic_race$count / sum(complaints_by_vic_race$count)
complaints_by_vic_race$dataset <- "Complaints"
complaints_by_vic_race
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
sqf_by_year <- read.csv(file="./Data/sqf_by_year.csv", header=TRUE)
ggplot(data=sqf_by_year, aes(x=year, y=count/1000)) + geom_bar(stat="identity") + ggtitle("NYPD Stop-and-Frisk (2003-2017)") + theme_grey(18) + theme(plot.title=element_text(hjust=0.5)) + scale_x_continuous("Year", labels=as.character(sqf_by_year$year), breaks=sqf_by_year$year) + ylab("Frequency (Thousands)")
arrests_by_race <- read.csv(file="./Data/arrests_by_race.csv", header=TRUE)
census_by_race <- read.csv(file="./Data/census_by_race.csv", header=TRUE)
complaints_by_susp_race <- read.csv(file="./Data/complaints_by_susp_race.csv", header=TRUE)
shootings_by_perp_race <- read.csv(file="./Data/shootings_by_perp_race.csv", header=TRUE)
sqf_by_race <- read.csv(file="./Data/sqf_by_race.csv", header=TRUE)
race_data <- do.call("rbind", list(arrests_by_race, complaints_by_susp_race, shootings_by_perp_race, sqf_by_race))
race_data$dataset <- factor(race_data$dataset, levels=c("Stop-and-Frisk", "Complaints", "Arrests", "Shootings"))
par(mfrow=c(1,2))
par(mar = c(11,4,3,1) + 0.1)
barplot(sqf_by_race$percentage, names.arg=sqf_by_race$race, main="Stop-and-Frisk by Suspect Race", ylim=c(0, .55), las=2)
barplot(census_by_race$percentage, names.arg=census_by_race$race, main="NYC 2010 Census by Race", ylim=c(0, .55), las=2)
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race")
race_bar_chart
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
shootings_data <- read.csv(file="./Raw_Data/shootings_data.csv", header=TRUE, na.strings="n/a")
shootings_data$PERP_RACE <- as.character(shootings_data$PERP_RACE)
shootings_data$PERP_RACE[shootings_data$PERP_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
shootings_data$PERP_RACE[shootings_data$PERP_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
shootings_by_perp_race <- aggregate(INCIDENT_KEY~PERP_RACE, shootings_data, length)
colnames(shootings_by_perp_race) <- c("race", "count")
shootings_by_perp_race <- shootings_by_perp_race[order(-shootings_by_perp_race$count),]
shootings_by_perp_race <- shootings_by_perp_race[-1,]
shootings_by_perp_race <- shootings_by_perp_race[!(shootings_by_perp_race$race=="UNKNOWN"),]
shootings_by_perp_race$percentage <- shootings_by_perp_race$count / sum(shootings_by_perp_race$count)
shootings_by_perp_race$dataset <- "Shootings"
write.csv(shootings_by_perp_race, file="./Data/shootings_by_perp_race.csv", row.names=FALSE)
shootings_by_perp_race
shootings_data$VIC_RACE <- as.character(shootings_data$VIC_RACE)
shootings_data$VIC_RACE[shootings_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
shootings_data$VIC_RACE[shootings_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
shootings_by_vic_race <- aggregate(INCIDENT_KEY~VIC_RACE, shootings_data, length)
colnames(shootings_by_vic_race) <- c("race", "count")
shootings_by_vic_race <- shootings_by_vic_race[order(-shootings_by_vic_race$count),]
shootings_by_vic_race <- shootings_by_vic_race[!(shootings_by_vic_race$race=="UNKNOWN"),]
shootings_by_vic_race$percentage <- shootings_by_vic_race$count / sum(shootings_by_vic_race$count)
shootings_by_vic_race$dataset <- "Shootings"
write.csv(shootings_by_vic_race, file="./Data/shootings_by_vic_race.csv", row.names=FALSE)
shootings_by_vic_race
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
complaints_data <- read.csv(file="./Raw_Data/complaints_data.csv", header=TRUE, na.strings="n/a")
complaints_data$SUSP_RACE <- as.character(complaints_data$SUSP_RACE)
complaints_data$SUSP_RACE[complaints_data$SUSP_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
complaints_data$SUSP_RACE[complaints_data$SUSP_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
complaints_by_susp_race <- aggregate(CMPLNT_NUM~SUSP_RACE, complaints_data, length)
colnames(complaints_by_susp_race) <- c("race", "count")
complaints_by_susp_race <- complaints_by_susp_race[order(-complaints_by_susp_race$count),]
complaints_by_susp_race <- complaints_by_susp_race[-1,]
complaints_by_susp_race <- complaints_by_susp_race[!(complaints_by_susp_race$race=="UNKNOWN"),]
complaints_by_susp_race$percentage <- complaints_by_susp_race$count / sum(complaints_by_susp_race$count)
complaints_by_susp_race$dataset <- "Complaints"
write.csv(complaints_by_susp_race, file="./Data/complaints_by_susp_race.csv", row.names=FALSE)
complaints_by_susp_race
complaints_data$VIC_RACE <- as.character(complaints_data$VIC_RACE)
complaints_data$VIC_RACE[complaints_data$VIC_RACE == "AMERICAN INDIAN/ALASKAN NATIVE"] <- "AMER IND"
complaints_data$VIC_RACE[complaints_data$VIC_RACE == "ASIAN / PACIFIC ISLANDER"] <- "ASIAN/PAC.ISL"
complaints_by_vic_race <- aggregate(CMPLNT_NUM~VIC_RACE, complaints_data, length)
colnames(complaints_by_vic_race) <- c("race", "count")
complaints_by_vic_race <- complaints_by_vic_race[order(-complaints_by_vic_race$count),]
complaints_by_vic_race <- complaints_by_vic_race[!(complaints_by_vic_race$race=="UNKNOWN"),]
complaints_by_vic_race <- head(complaints_by_vic_race,-2)
complaints_by_vic_race$percentage <- complaints_by_vic_race$count / sum(complaints_by_vic_race$count)
complaints_by_vic_race$dataset <- "Complaints"
write.csv(complaints_by_vic_race, file="./Data/complaints_by_vic_race.csv", row.names=FALSE)
complaints_by_vic_race
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
sqf_by_year <- read.csv(file="./Data/sqf_by_year.csv", header=TRUE)
ggplot(data=sqf_by_year, aes(x=year, y=count/1000)) + geom_bar(stat="identity") + ggtitle("NYPD Stop-and-Frisk (2003-2017)") + theme_grey(18) + theme(plot.title=element_text(hjust=0.5)) + scale_x_continuous("Year", labels=as.character(sqf_by_year$year), breaks=sqf_by_year$year) + ylab("Frequency (Thousands)")
arrests_by_race <- read.csv(file="./Data/arrests_by_race.csv", header=TRUE)
census_by_race <- read.csv(file="./Data/census_by_race.csv", header=TRUE)
complaints_by_susp_race <- read.csv(file="./Data/complaints_by_susp_race.csv", header=TRUE)
shootings_by_perp_race <- read.csv(file="./Data/shootings_by_perp_race.csv", header=TRUE)
sqf_by_race <- read.csv(file="./Data/sqf_by_race.csv", header=TRUE)
race_data <- do.call("rbind", list(arrests_by_race, complaints_by_susp_race, shootings_by_perp_race, sqf_by_race))
race_data$dataset <- factor(race_data$dataset, levels=c("Stop-and-Frisk", "Complaints", "Arrests", "Shootings"))
par(mfrow=c(1,2))
par(mar = c(11,4,3,1) + 0.1)
barplot(sqf_by_race$percentage, names.arg=sqf_by_race$race, main="Stop-and-Frisk by Suspect Race", ylim=c(0, .55), las=2)
barplot(census_by_race$percentage, names.arg=census_by_race$race, main="NYC 2010 Census by Race", ylim=c(0, .55), las=2)
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race")
race_bar_chart
complaints_by_vic_race <- read.csv(file="./Data/complaints_by_vic_race.csv", header=TRUE)
complaints_by_vic_race$susp_vic_category <- "Complaints | Victim"
shootings_by_vic_race <- read.csv(file="./Data/shootings_by_vic_race.csv", header=TRUE)
shootings_by_vic_race$cateogry <- "Shootings | Victim"
complaints_by_susp_race$susp_vic_category <- "Complaints | Suspect"
shootings_by_perp_race$susp_vic_category <- "Shootings | Perpetrator"
susp_vic_by_race <- do.call("rbind", list(complaints_by_vic_race, complaints_by_susp_race, shootings_by_perp_race, shootings_by_vic_race))
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
sqf_by_year <- read.csv(file="./Data/sqf_by_year.csv", header=TRUE)
ggplot(data=sqf_by_year, aes(x=year, y=count/1000)) + geom_bar(stat="identity") + ggtitle("NYPD Stop-and-Frisk (2003-2017)") + theme_grey(18) + theme(plot.title=element_text(hjust=0.5)) + scale_x_continuous("Year", labels=as.character(sqf_by_year$year), breaks=sqf_by_year$year) + ylab("Frequency (Thousands)")
arrests_by_race <- read.csv(file="./Data/arrests_by_race.csv", header=TRUE)
census_by_race <- read.csv(file="./Data/census_by_race.csv", header=TRUE)
complaints_by_susp_race <- read.csv(file="./Data/complaints_by_susp_race.csv", header=TRUE)
shootings_by_perp_race <- read.csv(file="./Data/shootings_by_perp_race.csv", header=TRUE)
sqf_by_race <- read.csv(file="./Data/sqf_by_race.csv", header=TRUE)
race_data <- do.call("rbind", list(arrests_by_race, complaints_by_susp_race, shootings_by_perp_race, sqf_by_race))
race_data$dataset <- factor(race_data$dataset, levels=c("Stop-and-Frisk", "Complaints", "Arrests", "Shootings"))
par(mfrow=c(1,2))
par(mar = c(11,4,3,1) + 0.1)
barplot(sqf_by_race$percentage, names.arg=sqf_by_race$race, main="Stop-and-Frisk by Suspect Race", ylim=c(0, .55), las=2)
barplot(census_by_race$percentage, names.arg=census_by_race$race, main="NYC 2010 Census by Race", ylim=c(0, .55), las=2)
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race")
race_bar_chart
complaints_by_vic_race <- read.csv(file="./Data/complaints_by_vic_race.csv", header=TRUE)
complaints_by_vic_race$susp_vic_category <- "Complaints | Victim"
shootings_by_vic_race <- read.csv(file="./Data/shootings_by_vic_race.csv", header=TRUE)
shootings_by_vic_race$susp_vic_category <- "Shootings | Victim"
complaints_by_susp_race$susp_vic_category <- "Complaints | Suspect"
shootings_by_perp_race$susp_vic_category <- "Shootings | Perpetrator"
susp_vic_by_race <- do.call("rbind", list(complaints_by_vic_race, complaints_by_susp_race, shootings_by_perp_race, shootings_by_vic_race))
susp_vic_by_race$susp_vic_category <- factor(susp_vic_by_race$susp_vic_category, levels=c("Complaints | Suspect", "Complaints | Victim", "Shootings | Perpetrator", "Shootings | Victim"))
susp_vic_bar_chart <- ggplot(susp_vic_by_race, aes(x=race, y=percentage)) + geom_bar(stat="identity") + facet_grid(.~susp_vic_category) + theme(axis.text.x = element_text(angle = 60, hjust=1))
complaints_by_vic_race <- read.csv(file="./Data/complaints_by_vic_race.csv", header=TRUE)
complaints_by_vic_race$susp_vic_category <- "Complaints | Victim"
shootings_by_vic_race <- read.csv(file="./Data/shootings_by_vic_race.csv", header=TRUE)
shootings_by_vic_race$susp_vic_category <- "Shootings | Victim"
complaints_by_susp_race$susp_vic_category <- "Complaints | Suspect"
shootings_by_perp_race$susp_vic_category <- "Shootings | Perpetrator"
susp_vic_by_race <- do.call("rbind", list(complaints_by_vic_race, complaints_by_susp_race, shootings_by_perp_race, shootings_by_vic_race))
susp_vic_by_race$susp_vic_category <- factor(susp_vic_by_race$susp_vic_category, levels=c("Complaints | Suspect", "Complaints | Victim", "Shootings | Perpetrator", "Shootings | Victim"))
susp_vic_bar_chart <- ggplot(susp_vic_by_race, aes(x=race, y=percentage)) + geom_bar(stat="identity") + facet_grid(.~susp_vic_category) + theme(axis.text.x = element_text(angle = 60, hjust=1))
susp_vic_bar_chart
complaints_by_vic_race <- read.csv(file="./Data/complaints_by_vic_race.csv", header=TRUE)
complaints_by_vic_race$susp_vic_category <- "Complaints | Victim"
shootings_by_vic_race <- read.csv(file="./Data/shootings_by_vic_race.csv", header=TRUE)
shootings_by_vic_race$susp_vic_category <- "Shootings | Victim"
complaints_by_susp_race$susp_vic_category <- "Complaints | Suspect"
shootings_by_perp_race$susp_vic_category <- "Shootings | Perpetrator"
susp_vic_by_race <- do.call("rbind", list(complaints_by_vic_race, complaints_by_susp_race, shootings_by_perp_race, shootings_by_vic_race))
susp_vic_by_race$susp_vic_category <- factor(susp_vic_by_race$susp_vic_category, levels=c("Complaints | Suspect", "Complaints | Victim", "Shootings | Perpetrator", "Shootings | Victim"))
susp_vic_bar_chart <- ggplot(susp_vic_by_race, aes(x=race, y=percentage)) + geom_bar(stat="identity") + facet_grid(.~susp_vic_category) + theme(axis.text.x = element_text(angle = 60, hjust=1))
susp_vic_bar_chart
complaints_by_vic_race <- read.csv(file="./Data/complaints_by_vic_race.csv", header=TRUE)
complaints_by_vic_race$susp_vic_category <- "Complaints | Victim"
shootings_by_vic_race <- read.csv(file="./Data/shootings_by_vic_race.csv", header=TRUE)
shootings_by_vic_race$susp_vic_category <- "Shootings | Victim"
complaints_by_susp_race$susp_vic_category <- "Complaints | Suspect"
shootings_by_perp_race$susp_vic_category <- "Shootings | Perpetrator"
susp_vic_by_race <- do.call("rbind", list(complaints_by_vic_race, complaints_by_susp_race, shootings_by_perp_race, shootings_by_vic_race))
susp_vic_by_race$susp_vic_category <- factor(susp_vic_by_race$susp_vic_category, levels=c("Complaints | Suspect", "Complaints | Victim", "Shootings | Perpetrator", "Shootings | Victim"))
susp_vic_bar_chart <- ggplot(susp_vic_by_race, aes(x=race, y=percentage)) + geom_bar(stat="identity") + facet_grid(.~susp_vic_category) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("")
susp_vic_bar_chart
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
install.packages(c("tidyverse", "ggplot2", "reshape2"))
knitr::opts_chunk$set(message = FALSE, warning = FALSE)
library(tidyverse)
library(ggplot2)
library(reshape2)
sqf_by_year <- read.csv(file="./Data/sqf_by_year.csv", header=TRUE)
ggplot(data=sqf_by_year, aes(x=year, y=count/1000)) + geom_bar(stat="identity") + ggtitle("NYPD Stop-and-Frisk (2003-2017)") + theme_grey(18) + theme(plot.title=element_text(hjust=0.5)) + scale_x_continuous("Year", labels=as.character(sqf_by_year$year), breaks=sqf_by_year$year) + ylab("Frequency (Thousands)")
arrests_by_race <- read.csv(file="./Data/arrests_by_race.csv", header=TRUE)
census_by_race <- read.csv(file="./Data/census_by_race.csv", header=TRUE)
complaints_by_susp_race <- read.csv(file="./Data/complaints_by_susp_race.csv", header=TRUE)
shootings_by_perp_race <- read.csv(file="./Data/shootings_by_perp_race.csv", header=TRUE)
sqf_by_race <- read.csv(file="./Data/sqf_by_race.csv", header=TRUE)
race_data <- do.call("rbind", list(arrests_by_race, complaints_by_susp_race, shootings_by_perp_race, sqf_by_race))
race_data$dataset <- factor(race_data$dataset, levels=c("Stop-and-Frisk", "Complaints", "Arrests", "Shootings"))
par(mfrow=c(1,2))
par(mar = c(11,4,3,1) + 0.1)
barplot(sqf_by_race$percentage, names.arg=sqf_by_race$race, main="Stop-and-Frisk by Suspect Race", ylim=c(0, .55), las=2, ylab="Percentage", yaxt="n")
axis(2, at=pretty(sqf_by_race$percentage), lab=paste0(pretty(sqf_by_race$percentage) * 100, "%"), las=2)
barplot(census_by_race$percentage, names.arg=census_by_race$race, main="NYC 2010 Census by Race", ylim=c(0, .55), las=2, ylab="Percentage", yaxt="n")
axis(2, at=pretty(sqf_by_race$percentage), lab=paste0(pretty(sqf_by_race$percentage) * 100, "%"), las=2)
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_brewer(palette="Set1") + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart
complaints_by_vic_race <- read.csv(file="./Data/complaints_by_vic_race.csv", header=TRUE)
complaints_by_vic_race$susp_vic_category <- "Complaints | Victim"
shootings_by_vic_race <- read.csv(file="./Data/shootings_by_vic_race.csv", header=TRUE)
shootings_by_vic_race$susp_vic_category <- "Shootings | Victim"
complaints_by_susp_race$susp_vic_category <- "Complaints | Suspect"
shootings_by_perp_race$susp_vic_category <- "Shootings | Perpetrator"
susp_vic_by_race <- do.call("rbind", list(complaints_by_vic_race, complaints_by_susp_race, shootings_by_perp_race, shootings_by_vic_race))
susp_vic_by_race$susp_vic_category <- factor(susp_vic_by_race$susp_vic_category, levels=c("Complaints | Suspect", "Complaints | Victim", "Shootings | Perpetrator", "Shootings | Victim"))
susp_vic_bar_chart <- ggplot(susp_vic_by_race, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~susp_vic_category) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_brewer(palette="Set1") + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
susp_vic_bar_chart
not_innocent_df <- read.csv(file="./Data/sqf_not_innocent.csv", header=TRUE)
ggplot(not_innocent_df, aes(x=reorder(Category, Count), y=Count/1000)) + geom_bar(stat="identity") + theme_grey(16) + coord_flip() + ylab("Frequency(Thousands)") + xlab("") + theme(plot.margin = margin(10, 15, 10, 1)) + ggtitle("Stop-and-Frisk Efficacy")
ggplot(not_innocent_df, aes(x=reorder(Category, Percentage_of_Stops), y=Percentage_of_Stops)) + geom_bar(stat="identity") + theme_grey(16) + coord_flip() + ylab("Percentage of Stops") + xlab("") + scale_y_continuous(labels = scales::percent) + theme(plot.margin = margin(10, 15, 10, 1)) + ggtitle("Stop-and-Frisk Efficacy")
# https://www1.nyc.gov/site/nypd/stats/crime-statistics/historical.page
sqf_vs_crime_by_year <- sqf_by_year
colnames(sqf_vs_crime_by_year) <- c("year", "sqf_count")
major_felonies_by_year <- c(147069, 142093,	135475,	128682,	121009,	117956,	106730,	105115,	106669,	111147,	111335,	106722,	105453, 101716, 96658)
non_major_felonies_by_year <- c(61217, 66733, 67854, 69028, 70958, 68958, 63760, 59387, 57240, 56902, 57650, 56869, 56520, 58346, 54907)
misdemeanors_by_year <- c(365471, 357724, 353649, 361574, 378616, 380406, 386765, 391892, 383108, 374364, 359350, 348371, 322848, 314925, 300354)
sqf_vs_crime_by_year$major_felonies <- major_felonies_by_year
sqf_vs_crime_by_year$nonmajor_felonies <- non_major_felonies_by_year
sqf_vs_crime_by_year$misdemeanors <- misdemeanors_by_year
starting_values_df <- sqf_vs_crime_by_year[sqf_vs_crime_by_year$year == 2003,]
sqf_vs_crime_by_year["Stop-and-Frisk"] <- (sqf_vs_crime_by_year$sqf_count/starting_values_df$sqf_count) * 100
sqf_vs_crime_by_year["Major Felonies"] <- (sqf_vs_crime_by_year$major_felonies/starting_values_df$major_felonies) * 100
sqf_vs_crime_by_year["Non-Major Felonies"] <- (sqf_vs_crime_by_year$nonmajor_felonies/starting_values_df$nonmajor_felonies) * 100
sqf_vs_crime_by_year["Misdemeanors"] <- (sqf_vs_crime_by_year$misdemeanors/starting_values_df$misdemeanors) * 100
sqf_crime_indexed_by_year <- melt(sqf_vs_crime_by_year, id.vars = "year", measure.vars = c("Stop-and-Frisk", "Major Felonies", "Non-Major Felonies", "Misdemeanors"))
colnames(sqf_crime_indexed_by_year)[2] <- "Category"
ggplot() + geom_line(data=sqf_crime_indexed_by_year, aes(x=year, y=value, color=Category), lwd=1.5) + xlab("Year") + ylab("Index") + ggtitle("Stop-and-Frisk vs. Crime") + scale_color_brewer(palette="Set1") + theme_grey(16) + theme(plot.title=element_text(hjust=0.5)) + scale_x_continuous("", labels = as.character(sqf_crime_indexed_by_year$year), breaks = sqf_crime_indexed_by_year$year)
sqf_race_agg_by_year <- read.csv("./Data/sqf_race_by_year.csv", header=TRUE)
ggplot() + geom_line(data=sqf_race_agg_by_year, aes(x=year, y=percentage, color=race), lwd=1.5) + ylab("Percentage") + ggtitle("Stops by Race Across Years") + guides(fill=guide_legend(title="")) + scale_color_brewer(palette="Set1") + theme_grey(16) + theme(plot.title=element_text(hjust=0.5)) + scale_x_continuous("", labels = as.character(sqf_race_agg_by_year$year), breaks = sqf_race_agg_by_year$year) + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_brewer(palette="Dark2") + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_brewer(palette=c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")) + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_brewer(palette = c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")) + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_brewer(palette=cbPalette) + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_manual(palette=cbPalette) + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_manual(values=cbPalette) + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_manual(values=cbPalette) + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
race_bar_chart <- ggplot(race_data, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~dataset) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("Suspect/Perpetrator Race") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_manual(values=cbbPalette) + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
race_bar_chart
complaints_by_vic_race <- read.csv(file="./Data/complaints_by_vic_race.csv", header=TRUE)
complaints_by_vic_race$susp_vic_category <- "Complaints | Victim"
shootings_by_vic_race <- read.csv(file="./Data/shootings_by_vic_race.csv", header=TRUE)
shootings_by_vic_race$susp_vic_category <- "Shootings | Victim"
complaints_by_susp_race$susp_vic_category <- "Complaints | Suspect"
shootings_by_perp_race$susp_vic_category <- "Shootings | Perpetrator"
susp_vic_by_race <- do.call("rbind", list(complaints_by_vic_race, complaints_by_susp_race, shootings_by_perp_race, shootings_by_vic_race))
susp_vic_by_race$susp_vic_category <- factor(susp_vic_by_race$susp_vic_category, levels=c("Complaints | Suspect", "Complaints | Victim", "Shootings | Perpetrator", "Shootings | Victim"))
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
susp_vic_bar_chart <- ggplot(susp_vic_by_race, aes(x=race, y=percentage, fill=race)) + geom_bar(stat="identity") + facet_grid(.~susp_vic_category) + theme(axis.text.x = element_text(angle = 60, hjust=1)) + xlab("") + ylab("Percentage") + guides(fill=guide_legend(title="")) + scale_fill_manual(values=cbbPalette) + scale_y_continuous(labels = scales::percent_format(accuracy = 1))
susp_vic_bar_chart
# https://www1.nyc.gov/site/nypd/stats/crime-statistics/historical.page
sqf_vs_crime_by_year <- sqf_by_year
colnames(sqf_vs_crime_by_year) <- c("year", "sqf_count")
major_felonies_by_year <- c(147069, 142093,	135475,	128682,	121009,	117956,	106730,	105115,	106669,	111147,	111335,	106722,	105453, 101716, 96658)
non_major_felonies_by_year <- c(61217, 66733, 67854, 69028, 70958, 68958, 63760, 59387, 57240, 56902, 57650, 56869, 56520, 58346, 54907)
misdemeanors_by_year <- c(365471, 357724, 353649, 361574, 378616, 380406, 386765, 391892, 383108, 374364, 359350, 348371, 322848, 314925, 300354)
sqf_vs_crime_by_year$major_felonies <- major_felonies_by_year
sqf_vs_crime_by_year$nonmajor_felonies <- non_major_felonies_by_year
sqf_vs_crime_by_year$misdemeanors <- misdemeanors_by_year
starting_values_df <- sqf_vs_crime_by_year[sqf_vs_crime_by_year$year == 2003,]
sqf_vs_crime_by_year["Stop-and-Frisk"] <- (sqf_vs_crime_by_year$sqf_count/starting_values_df$sqf_count) * 100
sqf_vs_crime_by_year["Major Felonies"] <- (sqf_vs_crime_by_year$major_felonies/starting_values_df$major_felonies) * 100
sqf_vs_crime_by_year["Non-Major Felonies"] <- (sqf_vs_crime_by_year$nonmajor_felonies/starting_values_df$nonmajor_felonies) * 100
sqf_vs_crime_by_year["Misdemeanors"] <- (sqf_vs_crime_by_year$misdemeanors/starting_values_df$misdemeanors) * 100
sqf_crime_indexed_by_year <- melt(sqf_vs_crime_by_year, id.vars = "year", measure.vars = c("Stop-and-Frisk", "Major Felonies", "Non-Major Felonies", "Misdemeanors"))
colnames(sqf_crime_indexed_by_year)[2] <- "Category"
ggplot() + geom_line(data=sqf_crime_indexed_by_year, aes(x=year, y=value, color=Category), lwd=1.5) + xlab("Year") + ylab("Index") + ggtitle("Stop-and-Frisk vs. Crime") + scale_color_manual(values=cbbPalette) + theme_grey(16) + theme(plot.title=element_text(hjust=0.5)) + scale_x_continuous("", labels = as.character(sqf_crime_indexed_by_year$year), breaks = sqf_crime_indexed_by_year$year)
